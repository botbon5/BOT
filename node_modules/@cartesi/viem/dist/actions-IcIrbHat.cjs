const e=require(`./chunk-CUT6urMc.cjs`),t=require(`./rollups-rn5sV-7y.cjs`),n=e.__toESM(require(`viem`)),r=e.__toESM(require(`viem/actions`)),i=e.__toESM(require(`p-retry`)),a=(e,n)=>{let{account:i,chain:a=e.chain,application:o,gas:s,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,payload:d}=n,f={account:i,abi:t.inputBoxAbi,address:t.inputBoxAddress,functionName:`addInput`,args:[o,d],gas:s,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,chain:a};return(0,r.estimateContractGas)(e,f)},o=async(e,n)=>{let{account:i,application:o,chain:s=e.chain,gas:c,maxFeePerGas:l,maxPriorityFeePerGas:u,nonce:d,payload:f}=n,p=typeof c!=`number`&&c!==null?await a(e,n):void 0;return(0,r.writeContract)(e,{account:i,abi:t.inputBoxAbi,address:t.inputBoxAddress,chain:s,functionName:`addInput`,args:[o,f],gas:p,maxFeePerGas:l,maxPriorityFeePerGas:u,nonce:d})},s=(e,n)=>{let{account:i,application:a,baseLayerData:o,chain:s=e.chain,execLayerData:c,gas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,nonce:f,token:p,tokenIds:m,values:h}=n,g={account:i,abi:t.erc1155BatchPortalAbi,address:t.erc1155BatchPortalAddress,functionName:`depositBatchERC1155Token`,args:[p,a,m,h,o,c],gas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,nonce:f,chain:s};return(0,r.estimateContractGas)(e,g)},c=async(e,n)=>{let{account:i,application:a,baseLayerData:o,chain:c=e.chain,execLayerData:l,gas:u,maxFeePerGas:d,maxPriorityFeePerGas:f,nonce:p,token:m,tokenIds:h,values:g}=n,_=typeof u!=`number`&&u!==null?await s(e,n):void 0;return(0,r.writeContract)(e,{account:i,abi:t.erc1155BatchPortalAbi,address:t.erc1155BatchPortalAddress,chain:c,functionName:`depositBatchERC1155Token`,args:[m,a,h,g,o,l],gas:_,maxFeePerGas:d,maxPriorityFeePerGas:f,nonce:p})},l=(e,n)=>{let{account:i,amount:a,application:o,chain:s=e.chain,execLayerData:c,gas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,nonce:f,token:p}=n,m={account:i,abi:t.erc20PortalAbi,address:t.erc20PortalAddress,functionName:`depositERC20Tokens`,args:[p,o,a,c],gas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,nonce:f,chain:s};return(0,r.estimateContractGas)(e,m)},u=async(e,n)=>{let{account:i,amount:a,application:o,chain:s=e.chain,execLayerData:c,gas:u,maxFeePerGas:d,maxPriorityFeePerGas:f,nonce:p,token:m}=n,h=typeof u!=`number`&&u!==null?await l(e,n):void 0;return(0,r.writeContract)(e,{account:i,abi:t.erc20PortalAbi,address:t.erc20PortalAddress,chain:s,functionName:`depositERC20Tokens`,args:[m,o,a,c],gas:h,maxFeePerGas:d,maxPriorityFeePerGas:f,nonce:p})},d=(e,n)=>{let{account:i,application:a,baseLayerData:o,chain:s=e.chain,execLayerData:c,gas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,nonce:f,token:p,tokenId:m}=n,h={account:i,abi:t.erc721PortalAbi,address:t.erc721PortalAddress,functionName:`depositERC721Token`,args:[p,a,m,o,c],gas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,nonce:f,chain:s};return(0,r.estimateContractGas)(e,h)},f=async(e,n)=>{let{account:i,application:a,baseLayerData:o,chain:s=e.chain,execLayerData:c,gas:l,maxFeePerGas:u,maxPriorityFeePerGas:f,nonce:p,token:m,tokenId:h}=n,g=typeof l!=`number`&&l!==null?await d(e,n):void 0;return(0,r.writeContract)(e,{account:i,abi:t.erc721PortalAbi,address:t.erc721PortalAddress,chain:s,functionName:`depositERC721Token`,args:[m,a,h,o,c],gas:g,maxFeePerGas:u,maxPriorityFeePerGas:f,nonce:p})},p=(e,n)=>{let{account:i,chain:a=e.chain,application:o,gas:s,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,execLayerData:d,value:f}=n,p={account:i,abi:t.etherPortalAbi,address:t.etherPortalAddress,functionName:`depositEther`,args:[o,d],gas:s,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,value:f,chain:a};return(0,r.estimateContractGas)(e,p)},m=async(e,n)=>{let{account:i,application:a,chain:o=e.chain,execLayerData:s,gas:c,maxFeePerGas:l,maxPriorityFeePerGas:u,nonce:d,value:f}=n,m=typeof c!=`number`&&c!==null?await p(e,n):void 0;return(0,r.writeContract)(e,{account:i,abi:t.etherPortalAbi,address:t.etherPortalAddress,chain:o,functionName:`depositEther`,args:[a,s],gas:m,maxFeePerGas:l,maxPriorityFeePerGas:u,nonce:d,value:f})},h=(e,n)=>{let{account:i,application:a,baseLayerData:o,chain:s=e.chain,execLayerData:c,gas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,nonce:f,token:p,tokenId:m,value:h}=n,g={account:i,abi:t.erc1155SinglePortalAbi,address:t.erc1155SinglePortalAddress,functionName:`depositSingleERC1155Token`,args:[p,a,m,h,o,c],gas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,nonce:f,chain:s};return(0,r.estimateContractGas)(e,g)},g=async(e,n)=>{let{account:i,application:a,baseLayerData:o,chain:s=e.chain,execLayerData:c,gas:l,maxFeePerGas:u,maxPriorityFeePerGas:d,nonce:f,token:p,tokenId:m,value:g}=n,_=typeof l!=`number`&&l!==null?await h(e,n):void 0;return(0,r.writeContract)(e,{account:i,abi:t.erc1155SinglePortalAbi,address:t.erc1155SinglePortalAddress,chain:s,functionName:`depositSingleERC1155Token`,args:[p,a,m,g,o,c],gas:_,maxFeePerGas:u,maxPriorityFeePerGas:d,nonce:f})},_=e=>{let{index:t,outputHashesSiblings:n,rawData:r}=e;if(!n)throw Error(`Output has no proof`);return[r,{outputIndex:t,outputHashesSiblings:n}]},v=(e,n)=>{let{account:i,chain:a=e.chain,application:o,gas:s,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,output:d}=n,f=_(d),p={account:i,abi:t.iApplicationAbi,address:o,functionName:`executeOutput`,args:f,gas:s,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,chain:a};return(0,r.estimateContractGas)(e,p)},y=async(e,n)=>{let{account:i,application:a,chain:o=e.chain,gas:s,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,output:d}=n,f=typeof s!=`number`&&s!==null?await v(e,n):void 0,p=_(d);return(0,r.writeContract)(e,{account:i,abi:t.iApplicationAbi,address:a,chain:o,functionName:`executeOutput`,args:p,gas:f,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u})},b=e=>({limit:e.limit,offset:e.offset,totalCount:e.total_count}),x=e=>{let{functionName:r,args:i}=(0,n.decodeFunctionData)({abi:t.dataAvailabilityAbi,data:e});switch(r){case`InputBox`:{let[e]=i;return{type:r,inputBoxAddress:e}}case`InputBoxAndEspresso`:{let[e,t,a]=i;return{type:r,inputBoxAddress:(0,n.getAddress)(e),fromBlock:t,namespaceId:a}}}},S=e=>({name:e.name,applicationAddress:(0,n.getAddress)(e.iapplication_address),consensusAddress:(0,n.getAddress)(e.iconsensus_address),inputBoxAddress:(0,n.getAddress)(e.iinputbox_address),templateHash:e.template_hash,epochLength:(0,n.hexToBigInt)(e.epoch_length),dataAvailability:x(e.data_availability),state:e.state,reason:e.reason,inputBoxBlock:(0,n.hexToBigInt)(e.iinputbox_block),lastInputCheckBlock:(0,n.hexToBigInt)(e.last_input_check_block),lastOutputCheckBlock:(0,n.hexToBigInt)(e.last_output_check_block),processedInputs:(0,n.hexToBigInt)(e.processed_inputs),createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at),executionParameters:{snapshotPolicy:e.execution_parameters.snapshot_policy,advanceIncCycles:(0,n.hexToBigInt)(e.execution_parameters.advance_inc_cycles),advanceMaxCycles:(0,n.hexToBigInt)(e.execution_parameters.advance_max_cycles),inspectIncCycles:(0,n.hexToBigInt)(e.execution_parameters.inspect_inc_cycles),inspectMaxCycles:(0,n.hexToBigInt)(e.execution_parameters.inspect_max_cycles),advanceIncDeadline:(0,n.hexToBigInt)(e.execution_parameters.advance_inc_deadline),advanceMaxDeadline:(0,n.hexToBigInt)(e.execution_parameters.advance_max_deadline),inspectIncDeadline:(0,n.hexToBigInt)(e.execution_parameters.inspect_inc_deadline),inspectMaxDeadline:(0,n.hexToBigInt)(e.execution_parameters.inspect_max_deadline),loadDeadline:(0,n.hexToBigInt)(e.execution_parameters.load_deadline),storeDeadline:(0,n.hexToBigInt)(e.execution_parameters.store_deadline),fastDeadline:(0,n.hexToBigInt)(e.execution_parameters.fast_deadline),maxConcurrentInspects:e.execution_parameters.max_concurrent_inspects,createdAt:new Date(e.execution_parameters.created_at),updatedAt:new Date(e.execution_parameters.updated_at)}}),C=e=>({index:(0,n.hexToBigInt)(e.index),firstBlock:(0,n.hexToBigInt)(e.first_block),lastBlock:(0,n.hexToBigInt)(e.last_block),claimHash:e.claim_hash,claimTransactionHash:e.claim_transaction_hash,status:e.status,virtualIndex:(0,n.hexToBigInt)(e.virtual_index),createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at)}),w=e=>({epochIndex:(0,n.hexToBigInt)(e.epoch_index),index:(0,n.hexToBigInt)(e.index),blockNumber:(0,n.hexToBigInt)(e.block_number),rawData:e.raw_data,decodedData:{chainId:(0,n.hexToBigInt)(e.decoded_data.chain_id),applicationContract:(0,n.getAddress)(e.decoded_data.application_contract),sender:(0,n.getAddress)(e.decoded_data.sender),blockNumber:(0,n.hexToBigInt)(e.decoded_data.block_number),blockTimestamp:(0,n.hexToBigInt)(e.decoded_data.block_timestamp),prevRandao:(0,n.hexToBigInt)(e.decoded_data.prev_randao),index:(0,n.hexToBigInt)(e.decoded_data.index),payload:e.decoded_data.payload},status:e.status,machineHash:e.machine_hash,outputsHash:e.outputs_hash,transactionReference:e.transaction_reference,createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at)}),T=e=>{switch(e.type){case`Notice`:return{type:`Notice`,payload:e.payload};case`Voucher`:return{type:`Voucher`,payload:e.payload,destination:(0,n.getAddress)(e.destination),value:(0,n.hexToBigInt)(e.value)};case`DelegateCallVoucher`:return{type:`DelegateCallVoucher`,payload:e.payload,destination:(0,n.getAddress)(e.destination)}}},E=e=>({epochIndex:(0,n.hexToBigInt)(e.epoch_index),inputIndex:(0,n.hexToBigInt)(e.input_index),index:(0,n.hexToBigInt)(e.index),rawData:e.raw_data,decodedData:T(e.decoded_data),hash:e.hash,outputHashesSiblings:e.output_hashes_siblings,executionTransactionHash:e.execution_transaction_hash,createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at)}),D=e=>({inputIndex:(0,n.hexToBigInt)(e.input_index),index:(0,n.hexToBigInt)(e.index),rawData:e.raw_data,createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at)}),O=async(e,t)=>{let{data:n}=await e.request({method:`cartesi_getApplication`,params:t});return S(n)},k=async e=>{let{data:t}=await e.request({method:`cartesi_getChainId`,params:[]});return(0,n.hexToNumber)(t)},A=async(e,t)=>{let{data:r}=await e.request({method:`cartesi_getEpoch`,params:{application:t.application,epoch_index:(0,n.numberToHex)(t.epochIndex)}});return C(r)},j=async(e,t)=>{let{data:r}=await e.request({method:`cartesi_getInput`,params:{application:t.application,input_index:(0,n.numberToHex)(t.inputIndex)}});return w(r)},M=async(e,t)=>{let{data:r}=await e.request({method:`cartesi_getLastAcceptedEpochIndex`,params:t});return(0,n.hexToBigInt)(r)},N=async e=>{let{data:t}=await e.request({method:`cartesi_getNodeVersion`,params:[]});return t},P=async(e,t)=>{let{data:r}=await e.request({method:`cartesi_getOutput`,params:{application:t.application,output_index:(0,n.numberToHex)(t.outputIndex)}});return E(r)},F=async(e,t)=>{let{processed_inputs:r}=await e.request({method:`cartesi_getProcessedInputCount`,params:t});return(0,n.hexToBigInt)(r)},I=async(e,t)=>{let{data:r}=await e.request({method:`cartesi_getReport`,params:{application:t.application,report_index:(0,n.numberToHex)(t.reportIndex)}});return D(r)},L=async(e,t)=>{let n=await e.request({method:`cartesi_listApplications`,params:t??{}});return{pagination:b(n.pagination),data:n.data.map(S)}},R=async(e,t)=>{let n=await e.request({method:`cartesi_listEpochs`,params:t});return{data:n.data.map(C),pagination:b(n.pagination)}},z=async(e,t)=>{let r=await e.request({method:`cartesi_listInputs`,params:{application:t.application,epoch_index:t.epochIndex===void 0?void 0:(0,n.numberToHex)(t.epochIndex),sender:t.sender,limit:t.limit,offset:t.offset}});return{data:r.data.map(w),pagination:b(r.pagination)}},B=e=>{switch(e){case`Notice`:return(0,n.toFunctionSelector)((0,n.getAbiItem)({abi:t.outputsAbi,name:`Notice`}));case`Voucher`:return(0,n.toFunctionSelector)((0,n.getAbiItem)({abi:t.outputsAbi,name:`Voucher`}));case`DelegateCallVoucher`:return(0,n.toFunctionSelector)((0,n.getAbiItem)({abi:t.outputsAbi,name:`DelegateCallVoucher`}))}},V=async(e,t)=>{let r=B(t.outputType),i=await e.request({method:`cartesi_listOutputs`,params:{application:t.application,epoch_index:t.epochIndex===void 0?void 0:(0,n.numberToHex)(t.epochIndex),input_index:t.inputIndex===void 0?void 0:(0,n.numberToHex)(t.inputIndex),output_type:r,voucher_address:t.voucherAddress,limit:t.limit,offset:t.offset}});return{data:i.data.map(E),pagination:b(i.pagination)}},H=async(e,t)=>{let r=await e.request({method:`cartesi_listReports`,params:{application:t.application,epoch_index:t.epochIndex===void 0?void 0:(0,n.numberToHex)(t.epochIndex),input_index:t.inputIndex===void 0?void 0:(0,n.numberToHex)(t.inputIndex),limit:t.limit,offset:t.offset}});return{data:r.data.map(D),pagination:b(r.pagination)}},U=async(e,n)=>{let{application:i,output:a}=n,o=_(a);try{return await(0,r.readContract)(e,{...n,abi:t.iApplicationAbi,address:i,args:o,functionName:`validateOutput`}),!0}catch{return!1}},W=async(e,t)=>{let r=t.pollingInterval??e.pollingInterval,a=t.retryCount??10,o=t.timeout,s=t.waitProcessing===void 0?!0:t.waitProcessing,c=t.rejectErrors===void 0?!1:t.rejectErrors,l=await(0,i.default)(async()=>{let{data:r}=await e.request({method:`cartesi_getInput`,params:{application:t.application,input_index:(0,n.numberToHex)(t.inputIndex)}});if(s&&r.status===`NONE`)throw Error(`Input is not processed`);if(c&&(r.status===`CYCLE_LIMIT_EXCEEDED`||r.status===`EXCEPTION`||r.status===`MACHINE_HALTED`||r.status===`PAYLOAD_LENGTH_LIMIT_EXCEEDED`||r.status===`REJECTED`||r.status===`TIME_LIMIT_EXCEEDED`||r.status===`OUTPUTS_LIMIT_EXCEEDED`))throw new i.AbortError(`Input status: ${r.status}`);return r},{retries:a,minTimeout:r,factor:1,maxRetryTime:o});return w(l)};Object.defineProperty(exports,`addInput`,{enumerable:!0,get:function(){return o}}),Object.defineProperty(exports,`depositBatchERC1155Token`,{enumerable:!0,get:function(){return c}}),Object.defineProperty(exports,`depositERC20Tokens`,{enumerable:!0,get:function(){return u}}),Object.defineProperty(exports,`depositERC721Token`,{enumerable:!0,get:function(){return f}}),Object.defineProperty(exports,`depositEther`,{enumerable:!0,get:function(){return m}}),Object.defineProperty(exports,`depositSingleERC1155Token`,{enumerable:!0,get:function(){return g}}),Object.defineProperty(exports,`estimateAddInputGas`,{enumerable:!0,get:function(){return a}}),Object.defineProperty(exports,`estimateDepositBatchERC1155TokenGas`,{enumerable:!0,get:function(){return s}}),Object.defineProperty(exports,`estimateDepositERC20TokensGas`,{enumerable:!0,get:function(){return l}}),Object.defineProperty(exports,`estimateDepositERC721TokenGas`,{enumerable:!0,get:function(){return d}}),Object.defineProperty(exports,`estimateDepositEtherGas`,{enumerable:!0,get:function(){return p}}),Object.defineProperty(exports,`estimateDepositSingleERC1155TokenGas`,{enumerable:!0,get:function(){return h}}),Object.defineProperty(exports,`estimateExecuteOutputGas`,{enumerable:!0,get:function(){return v}}),Object.defineProperty(exports,`executeOutput`,{enumerable:!0,get:function(){return y}}),Object.defineProperty(exports,`getApplication`,{enumerable:!0,get:function(){return O}}),Object.defineProperty(exports,`getChainId`,{enumerable:!0,get:function(){return k}}),Object.defineProperty(exports,`getEpoch`,{enumerable:!0,get:function(){return A}}),Object.defineProperty(exports,`getInput`,{enumerable:!0,get:function(){return j}}),Object.defineProperty(exports,`getLastAcceptedEpochIndex`,{enumerable:!0,get:function(){return M}}),Object.defineProperty(exports,`getNodeVersion`,{enumerable:!0,get:function(){return N}}),Object.defineProperty(exports,`getOutput`,{enumerable:!0,get:function(){return P}}),Object.defineProperty(exports,`getProcessedInputCount`,{enumerable:!0,get:function(){return F}}),Object.defineProperty(exports,`getReport`,{enumerable:!0,get:function(){return I}}),Object.defineProperty(exports,`listApplications`,{enumerable:!0,get:function(){return L}}),Object.defineProperty(exports,`listEpochs`,{enumerable:!0,get:function(){return R}}),Object.defineProperty(exports,`listInputs`,{enumerable:!0,get:function(){return z}}),Object.defineProperty(exports,`listOutputs`,{enumerable:!0,get:function(){return V}}),Object.defineProperty(exports,`listReports`,{enumerable:!0,get:function(){return H}}),Object.defineProperty(exports,`validateOutput`,{enumerable:!0,get:function(){return U}}),Object.defineProperty(exports,`waitForInput`,{enumerable:!0,get:function(){return W}});
//# sourceMappingURL=actions-IcIrbHat.cjs.map