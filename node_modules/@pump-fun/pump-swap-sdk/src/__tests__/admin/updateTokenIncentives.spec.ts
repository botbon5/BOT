import { expect } from "chai";
import BN from "bn.js";
import {
  clusterApiUrl,
  Connection,
  Keypair,
  TransactionInstruction,
} from "@solana/web3.js";
import { PumpAmmAdminSdk } from "../../sdk/pumpAmmAdmin";

describe("updateTokenIncentives", () => {
  const sdk = new PumpAmmAdminSdk(new Connection(clusterApiUrl("devnet")));

  it("should build the instruction successfully", async () => {
    const now = new BN(Date.now() / 1000);
    const oneDayLater = new BN(Date.now() / 1000 + 86400);
    const dayNumber = new BN(1);
    const tokenSupplyPerDay = new BN(1_000_000_000); // 1 billion tokens

    const instruction = await sdk.updateTokenIncentives(
      Keypair.generate().publicKey,
      now,
      oneDayLater,
      dayNumber,
      tokenSupplyPerDay,
    );

    expect(instruction).to.be.instanceOf(TransactionInstruction);
  });
});
