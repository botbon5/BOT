import { expect } from "chai";
import { clusterApiUrl, Connection, Keypair } from "@solana/web3.js";
import { ASSOCIATED_TOKEN_PROGRAM_ID } from "@solana/spl-token";
import { PumpAmmSdk } from "../sdk/pumpAmm";

describe("claimTokenIncentives", () => {
  const sdk = new PumpAmmSdk(new Connection(clusterApiUrl("devnet")));
  const testUser = Keypair.generate().publicKey;

  it("should build the instruction successfully", async () => {
    const instructions = await sdk.claimTokenIncentives(testUser, testUser);

    expect(instructions[0].programId.toString()).to.equal(
      ASSOCIATED_TOKEN_PROGRAM_ID.toString(),
    );
    expect(instructions[1].programId.toString()).to.equal(
      sdk.programId().toString(),
    );
  });
});
